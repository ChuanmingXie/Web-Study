<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6-14 用户自定义函数</title>
    <link rel="stylesheet" href="./css/6-12functiondefined.css">
    <script type="text/javascript">
        function fun1() {
            var name = "cloudWhales";
            function fun2(params) {
                var age = 18;
                alert(name);
            }
            // alert(age); // 报错！ 外部函数无法直接调用内部函数的局部变量
            fun2();     // 在外部函数中调用局部函数
        }
        fun1();
    </script>

    <script type="text/javascript">
        function fun1() {
            var n = 1;
            function fun2() {  //该函数访问了fun1中的变量 n 即为闭包函数
                alert(n);
            }
            return fun2;
        }
        var f = fun1();
        f();
    </script>

    <script type="text/javascript">
        function show(name, age) {
            alert("我是：" + name + ",今年：" + age);
        }
        window.show("cloudname", 22);
        show.call(window, "cloud", 25);
        show.apply(window, ["whales", 28]);
    </script>

    <script type="text/javascript">
        function show(arr, func) {
            func.call(window, arr);
        }
        show([1, 2, 3, 4], function (arr) { // 注意函数的实际执行在闭包中进行
            for (i in arr) {
                document.write(i + "  ");
            }
        })
    </script>
</head>

<body>
    <h2>4-16 函数-自定义函数</h2>
    <div class="panel_bg">
        <div class="panel">
            <h4>6-16-1 统计各个字符串之和</h4>
            <div>
                <p>请输入含有数字的字符串:<input type="text" value="3257dkjs84"></p>
                <hr>
                <input type="button" value="计 算" onclick="calc()">
                <p>各项数字子和为:<span></span></p>
            </div>
        </div>
        <div class="panel">
            <h4>6-16-2 四中函数定义的语法</h4>
            <div>
                <p>
                    function funcName ([param]) {<br>
                    statements;<br>
                    [return expression]<br>
                    }<br>
                </p>
                <p>
                    var x = function ([param]) { <br>
                    statements;<br>
                    [return expression]<br>
                    }<br>
                </p>
                <p>
                    var funcName=new Function([param],statements)
                </p>
                <p>
                    (function ([param]) {<br>
                    statements;<br>
                    [return expression]<br>
                    })([params]);
                </p>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function input() {
            // return prompt('请输入一个字符串,然后统计字符串各项数据之和');
            return document.getElementsByTagName('input')[0].value;
        }

        function count(data) {
            var sum = 0;
            for (var i in data) {
                // if (Object.hasOwnProperty.call(data, data[i])) {
                sum += parseInt(data[i]);
                // }
            }
            return sum;
        }

        function calc() {
            var data = input();
            var sum = count(data);
            // alert(data+'各项数字之和为:'+sum);
            document.getElementsByTagName('span')[0].innerText = sum;
        }

    </script>
</body>

</html>